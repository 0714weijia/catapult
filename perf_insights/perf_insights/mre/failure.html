<!DOCTYPE html>
<!--
Copyright 2015 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<script>
'use strict';

tr.exportTo('pi.mre', function() {
  function Failure(job, functionHandle, traceHandle, failureTypeName,
                   description, stack) {
    this.job = job;
    this.functionHandle = functionHandle;
    this.traceHandle = traceHandle;
    this.failureTypeName = failureTypeName;
    this.description = description;
    this.stack = stack;
  }

  Failure.prototype = {
    asDict: function() {
      if (!this.traceHandle)
        var sourceURL = '';
      else
        var sourceURL = this.traceHandle.sourceURL;
      return {
        job: this.job.guid,
        function_handle: this.functionHandle.guid,
        trace_source_url: sourceURL,
        failure_type_name: this.failureTypeName,
        description: this.description,
        stack: this.stack
      };
    }
  };

  Failure.fromDict = function(failureDict) {
    return new Failure(failureDict.job_guid, failureDict.function_handle_guid,
                       failureDict.trace_guid, failureDict.failure_type_name,
                       failureDict.description, failureDict.stack);
  };

  return {
    Failure: Failure
  };
});

</script>
