<!DOCTYPE html>
<!--
Copyright (c) 2015 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<link rel="import" href="/tracing/ui/base/dom_helpers.html">
<link rel="import" href="/tracing/ui/base/overlay.html">
<link rel="import" href="/tracing/ui/base/table.html">
<link rel="import" href="/tracing/ui/units/time_duration_span.html">
<link rel="import" href="/perf_insights/mre/map_results.html">
<link rel="import" href="/perf_insights/ui/reports/pi_report.html">
<link rel="import" href="/perf_insights/ui/generic_results_view.html">
<link rel="import" href="/perf_insights/mappers/reduce.html">
<link rel="import" href="/perf_insights/mappers/slice_cost.html">

<polymer-element name="pi-ui-v8-report"
    extends="pi-ui-r-pi-report"
    map-function-href="/perf_insights/mappers/v8_map_function.html"
    map-function-name="v8ReportMapFunction"
    reduce-function-href="/perf_insights/reducers/v8_reduce_function.html"
    reduce-function-name="v8ReportReduceFunction">
  <template>
    <style>
      :host {
        display: flex;
        flex-direction: column;
      }
      #table {
        flex: 1 1 auto;
      }
    </style>
    <pre id="table">
    </pre>
  </template>
  <script>
  'use strict';

  Polymer({
    created: function() {
      this.mapResults_ = undefined;
    },

    get mapResults() {
      return this.mapResults_;
    },

    set mapResults(mapResults) {
      this.mapResults_ = mapResults;
      this.updateContents_();
    },

    updateContents_: function() {
      var table = this.$.table;

      var results = this.mapResults_;
      if (!results)
        results = new pi.mre.MapResults();

      this.$.table.innerHTML = JSON.stringify(results.asDict(), undefined, 2);
    }
  });
  </script>
</polymer-element>
